<div class="admin-page">
  <div class="admin-wrapper">
    <h2>ユーザー一覧</h2>

    <table class="users-table">
      <thead>
        <tr>
          <th>名前</th>
          <th>メール</th>
          <th>操作</th>
        </tr>
      </thead>

      <tbody>
        <% @users.each do |user| %>
          <tr>
            <td><%= link_to user.name, admin_user_path(user), class: "user-link" %></td>
            <td><%= user.email %></td>

            <td>
              <% unless user.email == "guest@example.com" %>
                <% if user.is_banned %>
                  <%= link_to "BAN解除", unban_admin_user_path(user), method: :patch, class: "btn-ban" %>
                <% elsif user.is_deleted %>
                  <span class="status-deleted">退会済み</span>
                <% else %>
                  <%= link_to "退会させる", admin_user_path(user), method: :delete, data: { confirm: "本当に退会させますか？" }, class: "btn btn-delete" %>
                  <%= link_to "BANする", ban_admin_user_path(user), method: :patch, class: "btn-ban" %>
                <% end %>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
    <%= link_to "戻る", admin_users_path, class: "btn btn-back" %>
  </div>
</div>