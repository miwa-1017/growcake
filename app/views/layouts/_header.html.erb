<header class="site-header px-4 py-3">

  <% if user_signed_in? %>
    <div class="search-area d-flex mb-2">
      <%= form_with url: users_path, method: :get, local: true, class: "d-flex" do |f| %>
        <%= f.text_field :keyword, placeholder: "„É¶„Éº„Ç∂„ÉºÂêç„ÅßÊ§úÁ¥¢", class: "form-control me-2" %>
        <%= f.submit "üîç", class: "search-button" %>
      <% end %>
    </div>
  <% end %>

  <div class="d-flex justify-content-between align-items-center">

    <!-- „É≠„Ç¥ -->
    <div class="header-logo">
      <%= link_to root_path do %>
        <%= image_tag "growcake_logo.png", class: "logo-img" %>
      <% end %>
    </div>

    <!-- „Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ -->
    <nav class="header-nav d-flex align-items-center">

      <% if user_signed_in? %>
        <span class="welcome-text me-4">
          „Çà„ÅÜ„Åì„Åù„ÄÅ
          <%= current_user.guest? ? "„Ç≤„Çπ„Éà„Åï„Çì" : "#{current_user.name} „Åï„Çì" %>
        </span>
      <% end %>

      <%= link_to "About", about_path, class: "nav-link me-3" %>

      <% if user_signed_in? %>
        <%= link_to "ÊäïÁ®ø‰∏ÄË¶ß", posts_path, class: "nav-link me-3" %>

        <% unless current_user.guest? %>
          <%= link_to notifications_path,
              class: "notification-bell me-3 #{'has-unread' if current_user.notifications.unread.any?}" do %>
            <i class="fa-regular fa-bell"></i>

            <% unread_count = current_user.notifications.unread.count %>
            <% if unread_count > 0 %>
              <span class="notification-badge">
                <%= unread_count > 9 ? "9+" : unread_count %>
              </span>
            <% end %>
          <% end %>

          <%= link_to "„ÅÑ„ÅÑ„Å≠‰∏ÄË¶ß", likes_path, class: "nav-link me-3" %>
          <%= link_to "„Éû„Ç§„Éö„Éº„Ç∏", mypage_path, class: "nav-link me-3" %>
        <% end %>

        <%= link_to "„É≠„Ç∞„Ç¢„Ç¶„Éà",
            destroy_user_session_path,
            method: :delete,
            class: "nav-link me-3" %>

      <% else %>
        <%= link_to "„Ç≤„Çπ„Éà„É≠„Ç∞„Ç§„É≥", users_guest_sign_in_path, method: :post, class: "nav-link me-3" %>
        <%= link_to "„É≠„Ç∞„Ç§„É≥", new_user_session_path, class: "nav-link me-3" %>
        <%= link_to "Êñ∞Ë¶èÁôªÈå≤", new_user_registration_path, class: "nav-link me-3" %>
      <% end %>

    </nav>
  </div>
</header>